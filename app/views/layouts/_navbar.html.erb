<nav class="apple-navbar" id="mainNavbar" role="navigation" aria-label="Main Navigation">
  <div class="container-fluid nav-inner">
    <%= stylesheet_link_tag 'navbar', media: 'all', 'data-turbolinks-track': 'reload' %>

    <div class="apple-brand">
      <%= link_to '/', class: 'brand-link', aria: { label: 'BookBuddy Home' } do %>
        <%= image_tag 'bookbuddy_logo.svg', alt: 'BookBuddy Logo', class: 'apple-logo' %>
      <% end %>
    </div>

    <ul class="nav-links center-links" role="menubar">
      <li role="none"><%= link_to '/', class: 'nav-link', role: 'menuitem' do %>
        <i class="fas fa-home"></i><span>Home</span>
      <% end %></li>
      <li role="none"><%= link_to '/dashboard', class: 'nav-link', role: 'menuitem' do %>
        <i class="fas fa-chart-line"></i><span>Dashboard</span>
      <% end %></li>
      <li role="none"><%= link_to '/about', class: 'nav-link', role: 'menuitem' do %>
        <i class="fas fa-info-circle"></i><span>About</span>
      <% end %></li>
    </ul>

    <ul class="nav-links right-links" role="menubar">
   <% if logged_in? %>
  <li class="user-info" role="none">
    <span class="user-name">Welcome, <%= current_user.name || current_user.email %></span>
  </li>
  <li role="none"><%= link_to logout_path, method: :delete, class: 'nav-link', role: 'menuitem' do %>
    <i class="fas fa-sign-out-alt"></i><span>Logout</span>
  <% end %></li>
<% else %>
  <li role="none"><%= link_to login_path, class: 'nav-link', role: 'menuitem' do %>
    <i class="fas fa-sign-in-alt"></i><span>Login</span>
  <% end %></li>
  <li role="none"><%= link_to signup_path, class: 'nav-link', role: 'menuitem' do %>
    <i class="fas fa-user-plus"></i><span>Sign Up</span>
  <% end %></li>
<% end %>

    </ul>
    <button class="navbar-toggle" id="navbarToggle" aria-label="Toggle navigation">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
  </div>
  <div class="mobile-menu" id="mobileMenu">
    <ul>
      <li><%= link_to '/', class: 'nav-link' do %><i class="fas fa-home"></i> Home<% end %></li>
      <li><%= link_to '/dashboard', class: 'nav-link' do %><i class="fas fa-chart-line"></i> Dashboard<% end %></li>
      <li><%= link_to '/about', class: 'nav-link' do %><i class="fas fa-info-circle"></i> About<% end %></li>
      <% if logged_in? %>
        <li><%= link_to logout_path, method: :delete, class: 'nav-link' do %><i class="fas fa-sign-out-alt"></i> Logout<% end %></li>
      <% else %>
        <li><%= link_to login_path, class: 'nav-link' do %><i class="fas fa-sign-in-alt"></i> Login<% end %></li>
        <li><%= link_to signup_path, class: 'nav-link' do %><i class="fas fa-user-plus"></i> Sign Up<% end %></li>
      <% end %>
    </ul>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const navbar = document.getElementById('mainNavbar');
      window.addEventListener('scroll', function() {
        if (window.scrollY > 10) {
          navbar.classList.add('scrolled');
        } else {
          navbar.classList.remove('scrolled');
        }
      });
      const toggle = document.getElementById('navbarToggle');
      const mobileMenu = document.getElementById('mobileMenu');
      toggle.addEventListener('click', function() {
        mobileMenu.classList.toggle('open');
        toggle.classList.toggle('open');
      });
      mobileMenu.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', () => {
          mobileMenu.classList.remove('open');
          toggle.classList.remove('open');
        });
      });
    });
  </script>
</nav>
